!/bin/bash
#file to logout all users and prevent login

if [[ $# -ne 1 ]]; then
        echo "need name of user to ignore"
        exit
fi

myname=$1

users="$(who -u | awk '{ print $1 }' | uniq)"
touch /etc/nologin
for user in $user; do
        echo "check: $user"
        if [[ $user == $myname ]]; then
                echo "ignore: $user"
                continue
        fi
        echo "kicking out user-name $user"
        pkill KILL -u $user
done

sleep 120

rm /etc/nologin
